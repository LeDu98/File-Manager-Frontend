<p-dialog [(visible)]="showDialog" [header]="dialogTitle" [modal]="true" [closable]="true" [resizable]="true" [style]="getDialogStyle()" styleClass="file-preview-dialog" (onHide)="closeDialog()">

    <div *ngIf="loading" class="flex justify-content-center align-items-center" style="height: 400px;">
        <p-progressSpinner></p-progressSpinner>
        <span class="ml-3">Loading file content...</span>
    </div>

    <div *ngIf="error && !loading" class="p-3 border-round surface-100 text-red-600 text-center">
        <i class="pi pi-exclamation-triangle mr-2"></i> {{ error }}
    </div>

    <div *ngIf="fileType === 'image' && fileContent && !loading && !error" class="image-preview text-center">
        <img [src]="fileContent" [alt]="fileItem?.name" class="preview-image border-round shadow-2" />
    </div>

    <div *ngIf="fileType === 'text' && fileContent && !loading && !error" class="text-preview border-round surface-50 p-3">
        <pre class="m-0 white-space-pre-wrap font-family-monospace text-sm">{{ fileContent }}</pre>
    </div>

    <div *ngIf="fileType === 'unsupported' && !loading" class="text-center p-5">
        <i class="pi pi-file text-6xl text-300 mb-3"></i>
        <div class="text-xl mb-2">Preview not available</div>
        <div class="text-600">This file type is not supported for preview</div>
    </div>

    <ng-template pTemplate="footer">
        <div class="flex justify-content-end gap-2">
            <p-button label="Close" icon="pi pi-times" (onClick)="closeDialog()" severity="secondary">
            </p-button>
        </div>
    </ng-template>
</p-dialog>